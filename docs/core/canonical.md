```json
{
  "overview": "# Canonical Service Documentation\n\n## Introduction\nThe **Canonical Service** is an integral component of the Vivified platform, designed to facilitate data normalization and ensure cross-plugin compatibility. This service is pivotal in maintaining consistent data formats across disparate systems, ensuring seamless integration and interoperability.\n\n!!! note\n    The Canonical Service is HIPAA-compliant, ensuring that all data transformations adhere to stringent privacy and security standards.\n\n## Architecture\n\n```mermaid\ngraph TD;\n    A[Data Input] --> B[Canonical Service];\n    B --> C[Data Transformer];\n    C --> D[Canonical Models];\n    C --> E[Schema Registry];\n    E --> F[Schema Loader];\n    D --> G[Output];\n    F --> G;\n```\n\n## Key Components\n- **Canonical Models**: Define the standard data structures for users, messages, and events.\n- **Data Transformer**: Converts data between plugin-specific formats and canonical formats.\n- **Schema Registry**: Manages versioned schemas, facilitating schema upgrades and compatibility.\n- **Audit Service**: Logs and monitors data transformations to ensure compliance and traceability.\n\n## Security Considerations\n- **Data Encryption**: All data in transit and at rest is encrypted using industry-standard protocols.\n- **Access Controls**: Strict access controls are enforced to ensure only authorized entities can perform data transformations.\n- **Audit Logging**: Comprehensive logging of all data transformation activities for auditing and compliance verification.\n\n!!! warning\n    Ensure that all access to the Canonical Service is secured and monitored to prevent unauthorized data access.\n",
  "api": "# API Reference\n\n## CanonicalService Class\n\n### Methods\n\n#### `normalize_user`\nNormalizes user data from one plugin format to another.\n\n```python\nasync def normalize_user(\n    self, user_data: Dict[str, Any], source_plugin: str, target_plugin: str\n) -> CanonicalUser:\n```\n\n- **Parameters**:\n  - `user_data`: Dictionary containing user information.\n  - `source_plugin`: The source plugin format.\n  - `target_plugin`: The target plugin format.\n\n- **Returns**: A `CanonicalUser` object containing normalized user data.\n\n## SchemaRegistry Class\n\n### Methods\n\n#### `upsert`\nInserts or updates a schema in the registry.\n\n```python\ndef upsert(\n    self, name: str, version: Version, schema_data: Dict[str, Any]\n) -> None:\n```\n\n- **Parameters**:\n  - `name`: The name of the schema.\n  - `version`: The version of the schema.\n  - `schema_data`: The schema data to be stored.\n\n- **Returns**: None\n",
  "config": "# Configuration Guide\n\n## Configuration Options\n\n| Option              | Description                                      | Default        |\n|---------------------|--------------------------------------------------|----------------|\n| `audit_level`       | The level of auditing for data transformations. | `AuditLevel.BASIC` |\n| `schema_directory`  | Directory path for storing schema files.        | `schemas/`     |\n\n## Environment Variables\n\n- `CANONICAL_CONFIG_PATH`: Path to the configuration file.\n- `CANONICAL_LOG_LEVEL`: The logging level for the service.\n\n!!! tip\n    Ensure that configuration files are secured and only accessible to authorized personnel to maintain compliance.\n",
  "examples": "# Usage Examples\n\n=== \"Python\"\n\n    ```python\n    from vivified.canonical.service import CanonicalService\n    from vivified.audit.service import AuditService\n    from vivified.policy.engine import PolicyEngine\n\n    audit_service = AuditService()\n    policy_engine = PolicyEngine()\n    canonical_service = CanonicalService(audit_service, policy_engine)\n\n    user_data = {\n        'id': '1234',\n        'username': 'jdoe',\n        'email': 'jdoe@example.com'\n    }\n\n    normalized_user = await canonical_service.normalize_user(user_data, 'pluginA', 'pluginB')\n    print(normalized_user)\n    ```\n\n=== \"curl\"\n\n    ```bash\n    curl -X POST https://api.vivified.com/canonical/normalize_user \\\n         -H \"Content-Type: application/json\" \\\n         -d '{\n             \"user_data\": {\n                 \"id\": \"1234\",\n                 \"username\": \"jdoe\",\n                 \"email\": \"jdoe@example.com\"\n             },\n             \"source_plugin\": \"pluginA\",\n             \"target_plugin\": \"pluginB\"\n         }'\n    ```\n\n## Troubleshooting\n\n### Common Issues\n\n- **Issue**: Schema not found.\n  - **Solution**: Ensure that the schema is correctly registered in the schema registry.\n\n- **Issue**: Data transformation errors.\n  - **Solution**: Check the input data format and ensure it matches the expected schema.\n\n!!! note\n    For persistent issues, consult the service logs and verify the configuration settings."
}
```