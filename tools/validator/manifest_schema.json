{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": [
    "id",
    "name",
    "version",
    "contracts",
    "traits",
    "security",
    "compliance"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9-]+$"
    },
    "name": { "type": "string" },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "description": { "type": "string" },
    "contracts": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["CommunicationPlugin", "StoragePlugin", "IdentityPlugin"]
      }
    },
    "traits": {
      "type": "array",
      "items": { "type": "string" }
    },
    "dependencies": {
      "type": "array",
      "items": { "type": "string" }
    },
    "allowed_domains": {
      "type": "array",
      "items": { "type": "string" }
    },
    "endpoints": { "type": "object" },
    "security": {
      "type": "object",
      "required": ["authentication_required", "data_classification"],
      "properties": {
        "authentication_required": { "type": "boolean" },
        "data_classification": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "public",
              "internal",
              "confidential",
              "phi",
              "pii"
            ]
          }
        }
      }
    },
    "compliance": {
      "type": "object",
      "required": ["hipaa_controls", "audit_level"],
      "properties": {
        "hipaa_controls": {
          "type": "array",
          "items": { "type": "string" }
        },
        "audit_level": {
          "type": "string",
          "enum": ["none", "basic", "detailed", "complete"]
        }
      }
    }
  }
}
